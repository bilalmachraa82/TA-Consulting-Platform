(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9e3],{48623:function(e,t,r){Promise.resolve().then(r.bind(r,78413))},78413:function(e,t,r){"use strict";r.d(t,{ChatInterface:function(){return k}});var s=r(57437),n=r(2265),a=r(79205);let i=(0,a.Z)("file-search",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]]);var o=r(95805);let l=(0,a.Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var c=r(49322),d=r(82222),u=r(70525),f=r(51817),m=r(82023),x=r(44743),h=r(14438),p=r(62869),b=r(95186),g=r(19378),v=r(66070),w=r(48736),N=r(96362);function y({citations:e}){return e&&0!==e.length?(0,s.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,s.jsxs)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider flex items-center",children:[(0,s.jsx)(w.Z,{className:"w-3 h-3 mr-1"}),"Fontes Oficiais"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-2",children:e.map((e,t)=>{let r=e.title?e.title.replace(/__/g," - ").replace(/_/g," "):`Documento de Refer\xeancia ${t+1}`;return e.uri?.toLowerCase().endsWith(".pdf")||e.title?.toLowerCase().includes(".pdf"),(0,s.jsx)(v.Zb,{className:"bg-blue-50/50 border-blue-100 hover:border-blue-300 transition-colors group cursor-pointer",children:(0,s.jsxs)(v.aY,{className:"p-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg group-hover:bg-blue-200 transition-colors",children:(0,s.jsx)(w.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{className:"truncate",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-blue-900 truncate",title:r,children:r}),e.source&&(0,s.jsx)("p",{className:"text-xs text-blue-700 truncate",children:e.source})]})]}),e.uri&&(0,s.jsx)("a",{href:e.uri,target:"_blank",rel:"noopener noreferrer",className:"ml-2 p-1.5 hover:bg-blue-200 rounded-full text-blue-600 transition-colors",title:"Abrir documento original",children:(0,s.jsx)(N.Z,{className:"w-4 h-4"})})]})},t)})})]}):null}var j=r(67862);function k(){let[e,t]=(0,n.useState)([{id:"welcome",role:"assistant",content:'Ol\xe1! Sou o Auditor IA da TA Platform. \uD83D\uDEE1️\n\nEstou ligado diretamente \xe0 base de dados oficial dos fundos europeus (PRR, PT2030, etc.).\n\n**O que queres verificar hoje?**\nEx: "A minha empresa de turismo \xe9 eleg\xedvel para o aviso da descarboniza\xe7\xe3o?"',timestamp:new Date}]),[r,a]=(0,n.useState)(""),[w,N]=(0,n.useState)(!1),[k,C]=(0,n.useState)("ALL"),Z=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(Z.current){let e=Z.current.querySelector("[data-radix-scroll-area-viewport]");e&&(e.scrollTop=e.scrollHeight)}},[e]);let M=async()=>{if(!r.trim()||w)return;let e={id:Date.now().toString(),role:"user",content:r,timestamp:new Date};t(t=>[...t,e]),a(""),N(!0);try{let r=await fetch("/api/rag/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e.content,portal:"ALL"===k?void 0:k})}),s=await r.json();if(!s.success)throw Error(s.error||"Erro desconhecido");let n={id:(Date.now()+1).toString(),role:"assistant",content:s.answer,citations:s.citations,readinessScore:s.readinessScore,confidenceLevel:s.confidenceLevel,timestamp:new Date};t(e=>[...e,n])}catch(r){console.error("Chat error:",r);let e={id:(Date.now()+1).toString(),role:"assistant",content:`❌ **Erro:** ${r.message||"N\xe3o foi poss\xedvel processar o pedido."}`,timestamp:new Date,isError:!0};t(t=>[...t,e])}finally{N(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col h-[calc(100vh-10rem)] max-w-5xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg shadow-lg",children:(0,s.jsx)(i,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Auditor IA"}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-green-600 font-medium",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-1 animate-pulse"}),"Conectado ao File Search Store (529 Docs)"]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(p.z,{variant:"ghost",size:"sm",className:"text-xs text-purple-600 bg-purple-50 border border-purple-200 hover:bg-purple-100 hidden md:flex items-center gap-1",onClick:()=>{h.A.success("Pedido de revis\xe3o humana enviado!",{description:"Um consultor s\xe9nior validar\xe1 esta an\xe1lise nas pr\xf3ximas 2h."})},children:[(0,s.jsx)(o.Z,{className:"w-3 h-3"}),"Solicitar Valida\xe7\xe3o Humana"]}),(0,s.jsx)("div",{className:"h-6 w-px bg-slate-200 mx-1 hidden md:block"}),["ALL","PRR","PT2030","HORIZON"].map(e=>(0,s.jsx)(p.z,{variant:k===e?"default":"outline",size:"sm",onClick:()=>C(e),className:"text-xs",children:"ALL"===e?"Todos":e},e))]})]}),(0,s.jsxs)(v.Zb,{className:"flex-1 overflow-hidden flex flex-col shadow-xl border-t-4 border-t-blue-600",children:[(0,s.jsx)(g.x,{className:"flex-1 p-6",ref:Z,children:(0,s.jsxs)("div",{className:"space-y-6 pb-4",children:[e.map(e=>(0,s.jsxs)("div",{className:`flex gap-4 ${"user"===e.role?"flex-row-reverse":"flex-row"}`,children:[(0,s.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 shadow-md ${"user"===e.role?"bg-gray-200":e.isError?"bg-red-100 text-red-600":"bg-gradient-to-br from-blue-600 to-indigo-600 text-white"}`,children:"user"===e.role?(0,s.jsx)(l,{className:"w-6 h-6 text-gray-600"}):e.isError?(0,s.jsx)(c.Z,{className:"w-6 h-6"}):(0,s.jsx)(d.Z,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{className:`flex flex-col max-w-[80%] ${"user"===e.role?"items-end":"items-start"}`,children:[(0,s.jsx)("div",{className:`px-5 py-4 rounded-2xl shadow-sm ${"user"===e.role?"bg-blue-600 text-white rounded-tr-sm":e.isError?"bg-red-50 border border-red-200 text-red-900 rounded-tl-sm":"bg-white border-2 border-slate-100 text-slate-800 rounded-tl-sm"}`,children:"assistant"===e.role?(0,s.jsx)("div",{className:"prose prose-sm prose-slate max-w-none dark:prose-invert",children:(0,s.jsx)(j.UG,{children:e.content})}):(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:e.content})}),(0,s.jsxs)("div",{className:"mt-1",children:["assistant"===e.role&&void 0!==e.readinessScore&&(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-full text-xs font-bold shadow-sm mr-2 mb-2",children:[(0,s.jsx)(u.Z,{className:"w-3 h-3"}),(0,s.jsxs)("span",{children:["Readiness: ",e.readinessScore,"%"]})]}),"assistant"===e.role&&!e.isError&&void 0!==e.confidenceLevel&&(0,s.jsxs)("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold shadow-sm mb-2 ${e.confidenceLevel>=.8?"bg-gradient-to-r from-green-500 to-emerald-600 text-white":e.confidenceLevel>=.5?"bg-gradient-to-r from-amber-400 to-orange-500 text-white":"bg-gradient-to-r from-red-400 to-rose-500 text-white"}`,children:[(0,s.jsx)(i,{className:"w-3 h-3"}),(0,s.jsxs)("span",{children:["Confian\xe7a: ",Math.round(100*e.confidenceLevel),"%"]})]}),"assistant"===e.role&&!e.isError&&e.citations&&e.citations.length>0&&(0,s.jsx)("div",{className:"ml-2",children:(0,s.jsx)(y,{citations:e.citations})}),(0,s.jsx)("span",{className:"text-xs text-slate-400 mt-1 block px-1",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]},e.id)),w&&(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-600 to-indigo-600 text-white flex items-center justify-center flex-shrink-0 shadow-md",children:(0,s.jsx)(f.Z,{className:"w-6 h-6 animate-spin"})}),(0,s.jsxs)("div",{className:"bg-white border-2 border-slate-100 px-5 py-4 rounded-2xl rounded-tl-sm shadow-sm flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 text-blue-500 animate-pulse"}),(0,s.jsx)("span",{className:"text-sm text-slate-500 font-medium",children:"A analisar regulamentos oficiais..."})]})]})]})}),(0,s.jsxs)("div",{className:"p-4 bg-slate-50 border-t flex gap-3 items-end",children:[(0,s.jsx)(b.I,{value:r,onChange:e=>a(e.target.value),onKeyDown:e=>"Enter"===e.key&&!e.shiftKey&&M(),placeholder:"Fa\xe7a uma pergunta sobre elegibilidade, prazos ou regras...",className:"min-h-[50px] py-3 bg-white shadow-sm border-slate-200 focus:ring-blue-500 focus:border-blue-500 font-medium",disabled:w}),(0,s.jsx)(p.z,{onClick:M,disabled:w||!r.trim(),className:"h-[50px] w-[50px] rounded-xl bg-blue-600 hover:bg-blue-700 shadow-md transition-all hover:scale-105 active:scale-95",children:(0,s.jsx)(x.Z,{className:"w-5 h-5"})})]})]}),(0,s.jsx)("div",{className:"mt-3 text-center",children:(0,s.jsxs)("p",{className:"text-xs text-slate-400 flex items-center justify-center gap-1",children:[(0,s.jsx)(c.Z,{className:"w-3 h-3"}),"O Auditor IA baseia-se em documentos oficiais, mas n\xe3o substitui a valida\xe7\xe3o humana final para submiss\xe3o."]})})]})}},62869:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var s=r(57437),n=r(2265),a=r(37053),i=r(77712),o=r(94508);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},c)=>{let d=n?a.g7:"button";return(0,s.jsx)(d,{className:(0,o.cn)(l({variant:t,size:r,className:e})),ref:c,...i})});c.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var s=r(57437),n=r(2265),a=r(94508);let i=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));i.displayName="Card";let o=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("h3",{ref:r,className:(0,a.cn)("font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let c=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let d=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent";let u=n.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},95186:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var s=r(57437),n=r(2265),a=r(94508);let i=n.forwardRef(({className:e,type:t,...r},n)=>(0,s.jsx)("input",{type:t,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-background/50 px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));i.displayName="Input"},19378:function(e,t,r){"use strict";r.d(t,{x:function(){return o}});var s=r(57437),n=r(2265),a=r(43643),i=r(94508);let o=n.forwardRef(({className:e,children:t,...r},n)=>(0,s.jsxs)(a.fC,{ref:n,className:(0,i.cn)("relative overflow-hidden",e),...r,children:[(0,s.jsx)(a.l_,{className:"h-full w-full rounded-[inherit]",children:t}),(0,s.jsx)(l,{}),(0,s.jsx)(a.Ns,{})]}));o.displayName=a.fC.displayName;let l=n.forwardRef(({className:e,orientation:t="vertical",...r},n)=>(0,s.jsx)(a.gb,{ref:n,orientation:t,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:(0,s.jsx)(a.q4,{className:"relative flex-1 rounded-full bg-border"})}));l.displayName=a.gb.displayName},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(61994),n=r(53335);function a(...e){return(0,n.m6)((0,s.W)(e))}},82222:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},49322:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},96362:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},70525:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},95805:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},62484:function(e,t,r){"use strict";function s(e,[t,r]){return Math.min(r,Math.max(t,e))}r.d(t,{u:function(){return s}})},6741:function(e,t,r){"use strict";function s(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e?.(s),!1===r||!s.defaultPrevented)return t?.(s)}}r.d(t,{M:function(){return s}})},73966:function(e,t,r){"use strict";r.d(t,{b:function(){return i},k:function(){return a}});var s=r(2265),n=r(57437);function a(e,t){let r=s.createContext(t);function a(e){let{children:t,...a}=e,i=s.useMemo(()=>a,Object.values(a));return(0,n.jsx)(r.Provider,{value:i,children:t})}return a.displayName=e+"Provider",[a,function(n){let a=s.useContext(r);if(a)return a;if(void 0!==t)return t;throw Error(`\`${n}\` must be used within \`${e}\``)}]}function i(e,t=[]){let r=[],a=()=>{let t=r.map(e=>s.createContext(e));return function(r){let n=r?.[e]||t;return s.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return a.scopeName=e,[function(t,a){let i=s.createContext(a),o=r.length;function l(t){let{scope:r,children:a,...l}=t,c=r?.[e][o]||i,d=s.useMemo(()=>l,Object.values(l));return(0,n.jsx)(c.Provider,{value:d,children:a})}return r=[...r,a],l.displayName=t+"Provider",[l,function(r,n){let l=n?.[e][o]||i,c=s.useContext(l);if(c)return c;if(void 0!==a)return a;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:s})=>{let n=r(e)[`__scope${s}`];return{...t,...n}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(a,...t)]}},29114:function(e,t,r){"use strict";r.d(t,{gm:function(){return a}});var s=r(2265);r(57437);var n=s.createContext(void 0);function a(e){let t=s.useContext(n);return e||t||"ltr"}},66840:function(e,t,r){"use strict";r.d(t,{WV:function(){return o},jH:function(){return l}});var s=r(2265),n=r(54887),a=r(37053),i=r(57437),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=s.forwardRef((e,r)=>{let{asChild:s,...n}=e,o=s?a.g7:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(o,{...n,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function l(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}},26606:function(e,t,r){"use strict";r.d(t,{W:function(){return n}});var s=r(2265);function n(e){let t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...e)=>t.current?.(...e),[])}},61188:function(e,t,r){"use strict";r.d(t,{b:function(){return n}});var s=r(2265),n=globalThis?.document?s.useLayoutEffect:()=>{}}},function(e){e.O(0,[6137,501,4571,7862,2971,2117,1744],function(){return e(e.s=48623)}),_N_E=e.O()}]);