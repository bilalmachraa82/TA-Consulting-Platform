(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7663],{39019:function(e,t,a){Promise.resolve().then(a.bind(a,63372)),Promise.resolve().then(a.bind(a,27690)),Promise.resolve().then(a.bind(a,17026)),Promise.resolve().then(a.bind(a,14438))},63372:function(e,t,a){"use strict";a.d(t,{DashboardHeader:function(){return U}});var s=a(57437),r=a(80605),n=a(62869),i=a(98728),o=a(47692),l=a(2265),d=a(70085),c=a(10407),m=a(30401),u=a(40519),x=a(94508);let f=d.fC,h=d.xz;d.ZA,d.Uv,d.Tr,d.Ee,l.forwardRef(({className:e,inset:t,children:a,...r},n)=>(0,s.jsxs)(d.fF,{ref:n,className:(0,x.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[a,(0,s.jsx)(c.Z,{className:"ml-auto h-4 w-4"})]})).displayName=d.fF.displayName,l.forwardRef(({className:e,...t},a)=>(0,s.jsx)(d.tu,{ref:a,className:(0,x.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=d.tu.displayName;let p=l.forwardRef(({className:e,sideOffset:t=4,...a},r)=>(0,s.jsx)(d.Uv,{children:(0,s.jsx)(d.VY,{ref:r,sideOffset:t,className:(0,x.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));p.displayName=d.VY.displayName;let b=l.forwardRef(({className:e,inset:t,...a},r)=>(0,s.jsx)(d.ck,{ref:r,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...a}));b.displayName=d.ck.displayName,l.forwardRef(({className:e,children:t,checked:a,...r},n)=>(0,s.jsxs)(d.oC,{ref:n,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(d.wU,{children:(0,s.jsx)(m.Z,{className:"h-4 w-4"})})}),t]})).displayName=d.oC.displayName,l.forwardRef(({className:e,children:t,...a},r)=>(0,s.jsxs)(d.Rk,{ref:r,className:(0,x.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(d.wU,{children:(0,s.jsx)(u.Z,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=d.Rk.displayName;let g=l.forwardRef(({className:e,inset:t,...a},r)=>(0,s.jsx)(d.__,{ref:r,className:(0,x.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...a}));g.displayName=d.__.displayName;let j=l.forwardRef(({className:e,...t},a)=>(0,s.jsx)(d.Z0,{ref:a,className:(0,x.cn)("-mx-1 my-1 h-px bg-muted",e),...t}));j.displayName=d.Z0.displayName;var N=a(70650);let v=l.forwardRef(({className:e,...t},a)=>(0,s.jsx)(N.fC,{ref:a,className:(0,x.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));v.displayName=N.fC.displayName,l.forwardRef(({className:e,...t},a)=>(0,s.jsx)(N.Ee,{ref:a,className:(0,x.cn)("aspect-square h-full w-full",e),...t})).displayName=N.Ee.displayName;let y=l.forwardRef(({className:e,...t},a)=>(0,s.jsx)(N.NY,{ref:a,className:(0,x.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));y.displayName=N.NY.displayName;var w=a(27648),k=a(91723),C=a(48736),Z=a(76865),_=a(58896),z=a(94766),S=a(35974),R=a(19378),A=a(27312);let E=A.fC,D=A.xz,O=l.forwardRef(({className:e,align:t="center",sideOffset:a=4,...r},n)=>(0,s.jsx)(A.h_,{children:(0,s.jsx)(A.VY,{ref:n,align:t,sideOffset:a,className:(0,x.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));O.displayName=A.VY.displayName;var T=a(55710),I=a(13758);let L={AVISO_PRAZO_7D:k.Z,DOCUMENTO_EXPIRA_30D:C.Z,MILESTONE_ATRASADO:Z.Z,NOVO_MATCH_80:_.Z,CANDIDATURA_UPDATE:m.Z};function P(){let[e,t]=(0,l.useState)([]),[a,r]=(0,l.useState)(!0),[i,o]=(0,l.useState)(!1),d=e.filter(e=>!e.readAt).length;(0,l.useEffect)(()=>{c();let e=setInterval(c,6e4);return()=>clearInterval(e)},[]);let c=async()=>{try{let e=await fetch("/api/notifications");if(e.ok){let a=await e.json();t(a.notifications||[])}}catch(e){console.error("Failed to fetch notifications:",e)}finally{r(!1)}},m=async e=>{try{await fetch(`/api/notifications/${e}/read`,{method:"POST"}),t(t=>t.map(t=>t.id===e?{...t,readAt:new Date().toISOString()}:t))}catch(e){console.error("Failed to mark as read:",e)}},u=async()=>{try{await fetch("/api/notifications/read-all",{method:"POST"}),t(e=>e.map(e=>({...e,readAt:new Date().toISOString()})))}catch(e){console.error("Failed to mark all as read:",e)}};return(0,s.jsxs)(E,{open:i,onOpenChange:o,children:[(0,s.jsx)(D,{asChild:!0,children:(0,s.jsxs)(n.z,{variant:"ghost",size:"icon",className:"relative",children:[(0,s.jsx)(z.Z,{className:"h-5 w-5"}),d>0&&(0,s.jsx)(S.C,{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 bg-red-500 text-white text-xs",children:d>9?"9+":d})]})}),(0,s.jsxs)(O,{className:"w-80 p-0",align:"end",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsx)("h4",{className:"font-semibold",children:"Notifica\xe7\xf5es"}),d>0&&(0,s.jsx)(n.z,{variant:"ghost",size:"sm",onClick:u,className:"text-xs",children:"Marcar todas como lidas"})]}),(0,s.jsx)(R.x,{className:"h-[300px]",children:a?(0,s.jsx)("div",{className:"p-4 text-center text-gray-500 text-sm",children:"A carregar..."}):0===e.length?(0,s.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,s.jsx)(z.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-30"}),(0,s.jsx)("p",{className:"text-sm",children:"Sem notifica\xe7\xf5es"})]}):(0,s.jsx)("div",{className:"divide-y",children:e.map(e=>{let t=L[e.type]||z.Z,a=!e.readAt;return(0,s.jsx)("div",{className:`p-3 hover:bg-gray-50 cursor-pointer transition-colors ${a?"bg-blue-50/50":""}`,onClick:()=>{a&&m(e.id),e.link&&(window.location.href=e.link)},children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{className:`p-2 rounded-full ${a?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-500"}`,children:(0,s.jsx)(t,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:`text-sm ${a?"font-medium":"text-gray-600"}`,children:e.title}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.message}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:(0,T.Q)(new Date(e.sentAt),{addSuffix:!0,locale:I.pt})})]}),a&&(0,s.jsx)("div",{className:"h-2 w-2 bg-blue-500 rounded-full mt-2"})]})},e.id)})})}),(0,s.jsx)("div",{className:"p-2 border-t",children:(0,s.jsx)(n.z,{variant:"ghost",size:"sm",className:"w-full text-xs",asChild:!0,children:(0,s.jsx)("a",{href:"/dashboard/configuracoes?tab=notifications",children:"Ver todas as configura\xe7\xf5es"})})})]})]})}var M=a(85929),$=a(97226),B=a(25922);function F(){let{setTheme:e}=(0,B.F)();return(0,s.jsxs)(f,{children:[(0,s.jsx)(h,{asChild:!0,children:(0,s.jsxs)(n.z,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full hover:bg-muted focus-visible:ring-0 focus-visible:ring-offset-0",children:[(0,s.jsx)(M.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0 text-foreground"}),(0,s.jsx)($.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100 text-foreground"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,s.jsxs)(p,{align:"end",className:"border-border bg-card",children:[(0,s.jsx)(b,{onClick:()=>e("light"),children:"Light"}),(0,s.jsx)(b,{onClick:()=>e("dark"),children:"Dark"}),(0,s.jsx)(b,{onClick:()=>e("system"),children:"System"})]})]})}function U({user:e}){let t;return(0,s.jsx)("header",{className:"sticky top-0 z-40 border-b border-border bg-background/80 backdrop-blur-xl transition-colors duration-300",children:(0,s.jsxs)("div",{className:"flex h-16 items-center justify-between px-6",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)(w.default,{href:"/dashboard",className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-card border border-border flex items-center justify-center shadow-sm",children:(0,s.jsxs)("span",{className:"text-foreground font-bold text-lg",children:["TA",(0,s.jsx)("span",{className:"text-primary",children:"."})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-lg font-bold text-foreground",children:"TA Platform"}),(0,s.jsx)("p",{className:"text-xs text-primary",children:"Consulting Console"})]})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(F,{}),(0,s.jsx)(P,{}),(0,s.jsxs)(f,{children:[(0,s.jsx)(h,{asChild:!0,children:(0,s.jsx)(n.z,{variant:"ghost",className:"relative h-10 w-10 rounded-full hover:bg-muted transition-colors",children:(0,s.jsx)(v,{className:"h-9 w-9 border border-border",children:(0,s.jsx)(y,{className:"bg-card text-primary font-bold",children:(t=e?.name||"",t?.split(" ")?.map(e=>e[0])?.join("")?.toUpperCase()??"U")})})})}),(0,s.jsxs)(p,{className:"w-56 bg-card border-border text-card-foreground",align:"end",forceMount:!0,children:[(0,s.jsx)(g,{className:"font-normal",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium leading-none text-foreground",children:e?.name}),(0,s.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:e?.email})]})}),(0,s.jsx)(j,{className:"bg-border"}),(0,s.jsx)(b,{asChild:!0,className:"focus:bg-muted focus:text-foreground cursor-pointer",children:(0,s.jsxs)(w.default,{href:"/dashboard/configuracoes",className:"cursor-pointer",children:[(0,s.jsx)(i.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Configura\xe7\xf5es"})]})}),(0,s.jsx)(j,{className:"bg-border"}),(0,s.jsxs)(b,{onClick:()=>{(0,r.signOut)({callbackUrl:"/"})},className:"focus:bg-destructive/10 focus:text-destructive cursor-pointer text-destructive",children:[(0,s.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Terminar Sess\xe3o"})]})]})]})]})]})})}},27690:function(e,t,a){"use strict";a.d(t,{DashboardSidebar:function(){return C}});var s=a(57437),r=a(2265),n=a(27648),i=a(99376),o=a(94508),l=a(82023),d=a(76865),c=a(14938),m=a(98420),u=a(48736),x=a(70525),f=a(41671),h=a(31047),p=a(95805),b=a(96215),g=a(98728),j=a(10407),N=a(92451),v=a(62869),y=a(98239);function w({icon:e,className:t,active:a,size:r=20}){return(0,s.jsxs)("div",{className:(0,o.cn)("relative group flex items-center justify-center",t),children:[a&&(0,s.jsx)(y.E.div,{layoutId:"icon-active-glow",className:"absolute inset-0 bg-primary/20 blur-md rounded-full",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1.2},transition:{duration:.3}}),(0,s.jsx)(e,{size:r,className:(0,o.cn)("relative z-10 transition-all duration-300",a?"text-primary drop-shadow-[0_0_8px_rgba(59,130,246,0.5)]":"text-muted-foreground group-hover:text-foreground")}),(0,s.jsx)(e,{size:r,className:(0,o.cn)("absolute z-0 opacity-0 transition-all duration-300 transform scale-110 blur-[1px]",a?"opacity-30 text-primary translate-y-[1px]":"group-hover:opacity-20 text-foreground translate-y-[1px]")})]})}let k=[{title:"Intelligence",items:[{name:"Consultor IA",href:"/dashboard/consultor",icon:l.Z,isNew:!0},{name:"Recomenda\xe7\xf5es",href:"/dashboard/recomendacoes",icon:l.Z},{name:"Alertas",href:"/dashboard/alertas-consolidados",icon:d.Z}]},{title:"Workspace",items:[{name:"Dashboard",href:"/dashboard",icon:c.Z},{name:"Minhas Empresas",href:"/dashboard/minhas-empresas",icon:m.Z},{name:"Candidaturas",href:"/dashboard/candidaturas",icon:u.Z}]},{title:"Oportunidades",items:[{name:"Avisos & Fundos",href:"/dashboard/avisos",icon:x.Z},{name:"Elegibilidade",href:"/dashboard/elegibilidade",icon:f.Z}]},{title:"Gest\xe3o",items:[{name:"P\xf3s-Aprova\xe7\xe3o",href:"/dashboard/pos-award",icon:x.Z},{name:"Calend\xe1rio",href:"/dashboard/calendario",icon:h.Z},{name:"Documenta\xe7\xe3o",href:"/dashboard/documentacao",icon:u.Z},{name:"Equipas",href:"/dashboard/teams",icon:p.Z},{name:"Relat\xf3rios",href:"/dashboard/relatorios",icon:b.Z},{name:"Configura\xe7\xf5es",href:"/dashboard/configuracoes",icon:g.Z}]}];function C(){let e=(0,i.usePathname)(),[t,a]=(0,r.useState)(!1),[l,d]=(0,r.useState)(["Intelligence","Workspace","Oportunidades","Gest\xe3o"]),c=e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,s.jsxs)("div",{className:(0,o.cn)("flex flex-col h-[calc(100vh-4rem)] bg-background/80 backdrop-blur-xl border-r border-border transition-all duration-500 ease-in-out relative z-30",t?"w-16":"w-64"),children:[(0,s.jsx)("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03] z-[-1] bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[!t&&(0,s.jsx)("h2",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-widest px-2",children:"Workspace"}),(0,s.jsx)(v.z,{variant:"ghost",size:"sm",onClick:()=>a(!t),className:"hover:bg-muted text-muted-foreground hover:text-primary transition-all",children:t?(0,s.jsx)(j.Z,{className:"h-4 w-4"}):(0,s.jsx)(N.Z,{className:"h-4 w-4"})})]}),(0,s.jsx)("nav",{className:"flex-1 p-3 space-y-4 overflow-y-auto scrollbar-thin scrollbar-thumb-muted scrollbar-track-transparent",children:k.map(a=>{let r=l.includes(a.title);return(0,s.jsxs)("div",{className:"space-y-1",children:[!t&&(0,s.jsxs)("button",{onClick:()=>c(a.title),className:"flex items-center justify-between w-full px-3 py-1 text-xs font-semibold text-muted-foreground uppercase tracking-wider hover:text-foreground transition-colors",children:[a.title,(0,s.jsx)(j.Z,{className:(0,o.cn)("w-3 h-3 transition-transform",r?"rotate-90":"")})]}),(0,s.jsx)("div",{className:(0,o.cn)("space-y-1 overflow-hidden transition-all duration-300",r||t?"max-h-[500px] opacity-100":"max-h-0 opacity-0"),children:a.items.map(a=>{let r=e===a.href;return(0,s.jsxs)(n.default,{href:a.href,className:(0,o.cn)("group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all",r?"bg-primary/10 text-primary shadow-[0_0_15px_-3px_hsl(var(--primary)/0.3)]":"text-muted-foreground hover:bg-muted/50 hover:text-foreground"),children:[(0,s.jsx)(w,{icon:a.icon,active:r,className:(0,o.cn)("mr-3",t?"mx-auto mr-0":"")}),!t&&(0,s.jsxs)("div",{className:"flex-1 flex items-center justify-between",children:[(0,s.jsx)("span",{children:a.name}),a.isNew&&(0,s.jsx)("span",{className:"text-[10px] bg-blue-500/20 text-blue-400 px-1.5 py-0.5 rounded border border-blue-500/30 shadow-[0_0_10px_-2px_rgba(59,130,246,0.5)]",children:"AI"})]}),r&&!t&&(0,s.jsx)("div",{className:"absolute left-0 w-1 h-6 bg-primary rounded-r-full shadow-[0_0_10px_2px_hsl(var(--primary)/0.5)]"})]},a.href)})})]},a.title)})})]})}},17026:function(e,t,a){"use strict";a.d(t,{AIAssistant:function(){return v}});var s=a(57437),r=a(2265),n=a(57586),i=a(98239),o=a(92934),l=a(82023),d=a(32489),c=a(74656),m=a(48736),u=a(96362),x=a(51817),f=a(44743),h=a(62869),p=a(94508);function b({state:e="idle",className:t,onClick:a}){return(0,s.jsxs)(i.E.div,{onClick:a,whileHover:{scale:1.08},whileTap:{scale:.95},className:(0,p.cn)("relative w-14 h-14 cursor-pointer group",t),children:[(0,s.jsx)("div",{className:(0,p.cn)("absolute inset-0 rounded-full blur-xl transition-all duration-700","idle"===e&&"bg-cyan-500/15","active"===e&&"bg-cyan-400/30","thinking"===e&&"bg-cyan-400/40")}),(0,s.jsxs)("div",{className:(0,p.cn)("absolute inset-0 rounded-full transition-all duration-500","bg-gradient-to-br from-slate-800 via-slate-900 to-slate-950","border border-slate-700/50","shadow-[inset_0_2px_4px_rgba(255,255,255,0.05),0_4px_20px_rgba(0,0,0,0.5)]","overflow-hidden"),children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-transparent"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:"thinking"===e?(0,s.jsxs)(i.E.div,{className:"relative w-6 h-6",animate:{rotate:360},transition:{repeat:1/0,duration:3,ease:"linear"},children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-cyan-400/60 border-t-transparent"}),(0,s.jsx)("div",{className:"absolute inset-1 rounded-full border border-cyan-500/40 border-b-transparent"})]}):(0,s.jsx)("svg",{viewBox:"0 0 24 24",className:(0,p.cn)("w-6 h-6 transition-all duration-300","active"===e?"text-cyan-400":"text-slate-400 group-hover:text-cyan-400"),fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})})})]}),"idle"!==e&&(0,s.jsx)("div",{className:(0,p.cn)("absolute -top-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-slate-900","active"===e&&"bg-emerald-500","thinking"===e&&"bg-amber-400")})]})}var g=a(95186),j=a(66070),N=a(19378);function v(){let[e,t]=(0,r.useState)(!1),[a,p]=(0,r.useState)([{id:"1",text:"Ol\xe1! Sou o assistente inteligente da TA Consulting. Posso ajudar-te com avisos, candidaturas, empresas e muito mais. Como posso ajudar-te hoje?",isBot:!0,timestamp:new Date}]),[v,y]=(0,r.useState)(""),[w,k]=(0,r.useState)(!1),C=(0,r.useRef)(null);(0,r.useEffect)(()=>{C.current&&(C.current.scrollTop=C.current.scrollHeight)},[a]);let Z=async()=>{if(!v.trim()||w)return;let e={id:Date.now().toString(),text:v,isBot:!1,timestamp:new Date};p(t=>[...t,e]),y(""),k(!0);try{let e=await fetch("/api/rag/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:v})}),t=await e.json();if(!e.ok||!t.success)throw Error(t.error||"Erro ao processar mensagem");p(e=>[...e,{id:(Date.now()+1).toString(),text:t.answer,isBot:!0,timestamp:new Date,citations:t.citations}])}catch(e){console.error("Erro ao enviar mensagem:",e),p(e=>[...e,{id:(Date.now()+1).toString(),text:"Desculpa, ocorreu um erro ao processar a tua mensagem. Tenta novamente.",isBot:!0,timestamp:new Date}])}finally{k(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.M,{children:!e&&(0,s.jsx)(i.E.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"fixed bottom-6 right-6 z-50",children:(0,s.jsx)(b,{state:w?"thinking":"idle",onClick:()=>t(!0)})})}),(0,s.jsx)(n.M,{children:e&&(0,s.jsx)(i.E.div,{initial:{opacity:0,y:100,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.8},className:"fixed bottom-6 right-6 z-50 w-[400px] h-[620px]",children:(0,s.jsxs)(j.Zb,{className:"h-full flex flex-col shadow-2xl border border-border/50 bg-background/95 backdrop-blur-xl overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b bg-gradient-to-r from-primary/90 to-cyan-600/90 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-white/15 rounded-full backdrop-blur-sm",children:(0,s.jsx)(b,{state:"active",className:"w-7 h-7 pointer-events-none"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-white text-sm",children:"Assistente TA"}),(0,s.jsx)("p",{className:"text-[11px] text-white/70",children:"Sempre dispon\xedvel"})]})]}),(0,s.jsx)(h.z,{variant:"ghost",size:"icon",className:"text-white/80 hover:text-white hover:bg-white/10 h-8 w-8",onClick:()=>t(!1),children:(0,s.jsx)(d.Z,{className:"w-4 h-4"})})]}),(0,s.jsx)(N.x,{className:"flex-1 p-4",ref:C,children:(0,s.jsxs)("div",{className:"space-y-4",children:[a.map(e=>(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:`flex flex-col ${e.isBot?"items-start":"items-end"}`,children:[(0,s.jsx)("div",{className:`max-w-[88%] p-3.5 rounded-2xl ${e.isBot?"bg-muted/70 text-foreground rounded-tl-sm":"bg-gradient-to-br from-primary to-cyan-600 text-white rounded-tr-sm shadow-lg shadow-primary/20"}`,children:e.isBot?(0,s.jsx)("div",{className:"space-y-1",children:function(e){let t=e.split("\n"),a=[],r=[],n=()=>{if(0===r.length)return;let e="ol"===r[0].type;a.push((0,s.jsx)("div",{className:"space-y-1.5 my-2",children:r.map((t,a)=>(0,s.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[e?(0,s.jsx)("span",{className:"text-xs font-medium text-primary bg-primary/10 w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:a+1}):(0,s.jsx)(o.Z,{className:"w-4 h-4 text-emerald-500 flex-shrink-0 mt-0.5"}),(0,s.jsx)("span",{className:"leading-relaxed",children:i(t.text)})]},a))},`list-${a.length}`)),r=[]},i=e=>{let t=e.split(/\*\*(.*?)\*\*/g);return 1===t.length?e:t.map((e,t)=>t%2==1?(0,s.jsx)("span",{className:"font-semibold text-primary",children:e},t):e)};return t.forEach((e,t)=>{let o=e.trim();if(/^[-*]\s/.test(o)){r.push({text:o.slice(2),type:"ul"});return}if(/^\d+\.\s/.test(o)){r.push({text:o.replace(/^\d+\.\s/,""),type:"ol"});return}if("---"===o||"***"===o){n(),a.push((0,s.jsx)("hr",{className:"border-border/50 my-3"},`hr-${t}`));return}if(!o){n();return}if(o.startsWith("## ")){n(),a.push((0,s.jsxs)("h3",{className:"text-sm font-semibold text-foreground mt-3 mb-1 flex items-center gap-1.5",children:[(0,s.jsx)(l.Z,{className:"w-3.5 h-3.5 text-primary"}),i(o.slice(3))]},`h3-${t}`));return}if(o.startsWith("### ")){n(),a.push((0,s.jsx)("h4",{className:"text-sm font-medium text-muted-foreground mt-2 mb-1",children:i(o.slice(4))},`h4-${t}`));return}n(),a.push((0,s.jsx)("p",{className:"text-sm leading-relaxed text-foreground/90",children:i(o)},`p-${t}`))}),n(),a}(e.text)}):(0,s.jsx)("p",{className:"text-sm leading-relaxed",children:e.text})}),e.isBot&&e.citations&&e.citations.length>0&&(0,s.jsxs)("div",{className:"mt-2.5 ml-1 max-w-[88%] space-y-1.5",children:[(0,s.jsxs)("p",{className:"text-[10px] font-medium text-muted-foreground flex items-center gap-1 uppercase tracking-wider",children:[(0,s.jsx)(c.Z,{className:"w-3 h-3"})," Fontes"]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5",children:e.citations.slice(0,3).map((e,t)=>(0,s.jsxs)("div",{className:"bg-card border border-border/50 px-2.5 py-1.5 rounded-lg flex items-center gap-2 hover:bg-muted/50 transition-colors cursor-pointer group text-xs",children:[(0,s.jsx)(m.Z,{className:"w-3 h-3 text-primary flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate max-w-[120px] text-muted-foreground group-hover:text-foreground transition-colors",children:e.title||"Documento"}),e.url&&(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-primary/70 hover:text-primary",children:(0,s.jsx)(u.Z,{className:"w-3 h-3"})})]},t))})]}),(0,s.jsx)("p",{className:"text-[10px] text-muted-foreground/60 mt-1 px-1",children:e.timestamp.toLocaleTimeString("pt-PT",{hour:"2-digit",minute:"2-digit"})})]},e.id)),w&&(0,s.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-start",children:(0,s.jsxs)("div",{className:"bg-muted/70 rounded-2xl rounded-tl-sm px-4 py-3 flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce [animation-delay:0ms]"}),(0,s.jsx)("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce [animation-delay:150ms]"}),(0,s.jsx)("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce [animation-delay:300ms]"})]})})]})}),(0,s.jsx)("div",{className:"p-3 border-t bg-background/50",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(g.I,{placeholder:"Escreve a tua pergunta...",value:v,onChange:e=>y(e.target.value),onKeyDown:e=>"Enter"===e.key&&!w&&Z(),className:"flex-1 h-10 text-sm bg-muted/50 border-border/50 focus:border-primary/50",disabled:w}),(0,s.jsx)(h.z,{onClick:Z,className:"h-10 w-10 bg-gradient-to-br from-primary to-cyan-600 hover:opacity-90 shadow-md shadow-primary/20",size:"icon",disabled:w,children:w?(0,s.jsx)(x.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(f.Z,{className:"w-4 h-4"})})]})})]})})})]})}},35974:function(e,t,a){"use strict";a.d(t,{C:function(){return o}});var s=a(57437);a(2265);var r=a(77712),n=a(94508);let i=(0,r.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...a}){return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:t}),e),...a})}},62869:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var s=a(57437),r=a(2265),n=a(37053),i=a(77712),o=a(94508);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:t,size:a,asChild:r=!1,...i},d)=>{let c=r?n.g7:"button";return(0,s.jsx)(c,{className:(0,o.cn)(l({variant:t,size:a,className:e})),ref:d,...i})});d.displayName="Button"},66070:function(e,t,a){"use strict";a.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},eW:function(){return m},ll:function(){return l}});var s=a(57437),r=a(2265),n=a(94508);let i=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)("div",{ref:a,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));i.displayName="Card";let o=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)("h3",{ref:a,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let m=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));m.displayName="CardFooter"},95186:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var s=a(57437),r=a(2265),n=a(94508);let i=r.forwardRef(({className:e,type:t,...a},r)=>(0,s.jsx)("input",{type:t,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-background/50 px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));i.displayName="Input"},19378:function(e,t,a){"use strict";a.d(t,{x:function(){return o}});var s=a(57437),r=a(2265),n=a(43643),i=a(94508);let o=r.forwardRef(({className:e,children:t,...a},r)=>(0,s.jsxs)(n.fC,{ref:r,className:(0,i.cn)("relative overflow-hidden",e),...a,children:[(0,s.jsx)(n.l_,{className:"h-full w-full rounded-[inherit]",children:t}),(0,s.jsx)(l,{}),(0,s.jsx)(n.Ns,{})]}));o.displayName=n.fC.displayName;let l=r.forwardRef(({className:e,orientation:t="vertical",...a},r)=>(0,s.jsx)(n.gb,{ref:r,orientation:t,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...a,children:(0,s.jsx)(n.q4,{className:"relative flex-1 rounded-full bg-border"})}));l.displayName=n.gb.displayName},94508:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(61994),r=a(53335);function n(...e){return(0,r.m6)((0,s.W)(e))}}},function(e){e.O(0,[6137,501,8239,7648,7514,3145,605,4571,2318,9866,2971,2117,1744],function(){return e(e.s=39019)}),_N_E=e.O()}]);