(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8592],{85750:function(e,t,s){Promise.resolve().then(s.bind(s,66796))},66796:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var a=s(57437),r=s(2265),l=s(80605),d=s(91723),n=s(70525),c=s(92934),i=s(76865),o=s(58896),m=s(48736);let x=(0,s(79205).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var h=s(43681),u=s(31047),p=s(99397),g=s(10407);let b={PENDENTE:{label:"Pendente",color:"bg-gray-500/20 text-gray-400",icon:d.Z},EM_PROGRESSO:{label:"Em Progresso",color:"bg-blue-500/20 text-blue-400",icon:n.Z},CONCLUIDO:{label:"Conclu\xeddo",color:"bg-green-500/20 text-green-400",icon:c.Z},ATRASADO:{label:"Atrasado",color:"bg-red-500/20 text-red-400",icon:i.Z}},j={RASCUNHO:{label:"Rascunho",color:"bg-gray-500/20 text-gray-400"},SUBMETIDO:{label:"Submetido",color:"bg-blue-500/20 text-blue-400"},EM_ANALISE:{label:"Em An\xe1lise",color:"bg-yellow-500/20 text-yellow-400"},APROVADO:{label:"Aprovado",color:"bg-green-500/20 text-green-400"},REJEITADO:{label:"Rejeitado",color:"bg-red-500/20 text-red-400"},PAGO:{label:"Pago",color:"bg-emerald-500/20 text-emerald-400"}};function f(e){return new Intl.NumberFormat("pt-PT",{style:"currency",currency:"EUR"}).format(e)}function N(e){return new Date(e).toLocaleDateString("pt-PT",{day:"2-digit",month:"short",year:"numeric"})}function y(){let{data:e}=(0,l.useSession)(),[t,s]=(0,r.useState)([]),[d,c]=(0,r.useState)(null),[i,y]=(0,r.useState)(!0),[v,w]=(0,r.useState)("milestones");async function k(){try{let e=await fetch("/api/candidaturas?estado=APROVADA&include=milestones,pedidosPagamento"),t=await e.json();t.candidaturas&&(s(t.candidaturas),t.candidaturas.length>0&&c(t.candidaturas[0]))}catch(e){console.error("Erro ao carregar candidaturas:",e)}finally{y(!1)}}(0,r.useEffect)(()=>{k()},[]);let Z=t.reduce((e,t)=>e+(t.montanteAprovado||0),0),A=t.reduce((e,t)=>e+(t.pedidosPagamento||[]).filter(e=>"PAGO"===e.estado).reduce((e,t)=>e+t.montante,0),0),P=Z>0?A/Z*100:0;return i?(0,a.jsx)("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-[#0a0a0f] text-white p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,a.jsx)(o.Z,{className:"w-8 h-8 text-emerald-400"}),"Gest\xe3o P\xf3s-Aprova\xe7\xe3o"]}),(0,a.jsx)("p",{className:"text-gray-400 mt-1",children:"Acompanhe milestones, despesas e pedidos de pagamento"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"bg-[#12121a] rounded-xl border border-white/10 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:(0,a.jsx)(m.Z,{className:"w-5 h-5 text-blue-400"})}),(0,a.jsx)("span",{className:"text-gray-400",children:"Projectos Activos"})]}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:t.length})]}),(0,a.jsxs)("div",{className:"bg-[#12121a] rounded-xl border border-white/10 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:(0,a.jsx)(x,{className:"w-5 h-5 text-emerald-400"})}),(0,a.jsx)("span",{className:"text-gray-400",children:"Total Aprovado"})]}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:f(Z)})]}),(0,a.jsxs)("div",{className:"bg-[#12121a] rounded-xl border border-white/10 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"p-2 bg-green-500/20 rounded-lg",children:(0,a.jsx)(h.Z,{className:"w-5 h-5 text-green-400"})}),(0,a.jsx)("span",{className:"text-gray-400",children:"Total Recebido"})]}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:f(A)})]}),(0,a.jsxs)("div",{className:"bg-[#12121a] rounded-xl border border-white/10 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:(0,a.jsx)(n.Z,{className:"w-5 h-5 text-purple-400"})}),(0,a.jsx)("span",{className:"text-gray-400",children:"Taxa Execu\xe7\xe3o"})]}),(0,a.jsxs)("p",{className:"text-3xl font-bold",children:[P.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"mt-2 h-2 bg-white/10 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-purple-500 to-emerald-500 rounded-full transition-all",style:{width:`${P}%`}})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-[#12121a] rounded-xl border border-white/10 p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Projectos Aprovados"}),0===t.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(o.Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"Sem projectos aprovados"})]}):(0,a.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,a.jsxs)("button",{onClick:()=>c(e),className:`w-full text-left p-4 rounded-lg transition-all ${d?.id===e.id?"bg-blue-500/20 border border-blue-500/50":"bg-white/5 hover:bg-white/10 border border-transparent"}`,children:[(0,a.jsx)("p",{className:"font-medium truncate",children:e.empresa.nome}),(0,a.jsx)("p",{className:"text-sm text-gray-400 truncate",children:e.aviso.nome}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)("span",{className:"text-xs bg-white/10 px-2 py-1 rounded",children:e.aviso.programa}),(0,a.jsx)("span",{className:"text-sm text-emerald-400",children:f(e.montanteAprovado||0)})]})]},e.id))})]}),(0,a.jsx)("div",{className:"lg:col-span-2 bg-[#12121a] rounded-xl border border-white/10 p-6",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6 border-b border-white/10 pb-4",children:[(0,a.jsxs)("button",{onClick:()=>w("milestones"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${"milestones"===v?"bg-blue-500/20 text-blue-400":"text-gray-400 hover:text-white"}`,children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),"Milestones"]}),(0,a.jsxs)("button",{onClick:()=>w("pagamentos"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${"pagamentos"===v?"bg-blue-500/20 text-blue-400":"text-gray-400 hover:text-white"}`,children:[(0,a.jsx)(x,{className:"w-4 h-4"}),"Pedidos de Pagamento"]})]}),"milestones"===v&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Timeline de Milestones"}),(0,a.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm transition-colors",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),"Novo"]})]}),0===(d.milestones||[]).length?(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500 border border-dashed border-white/10 rounded-lg",children:[(0,a.jsx)(u.Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"Sem milestones definidos"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"Adicione marcos para acompanhar o progresso"})]}):(0,a.jsx)("div",{className:"space-y-4",children:d.milestones.map((e,t)=>{let s=b[e.estado],r=s.icon;return(0,a.jsxs)("div",{className:"flex gap-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[(0,a.jsx)("div",{className:`p-2 rounded-lg ${s.color}`,children:(0,a.jsx)(r,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:e.titulo}),e.descricao&&(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:e.descricao}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,a.jsx)(u.Z,{className:"w-3 h-3"}),N(e.dataLimite)]}),(0,a.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${s.color}`,children:s.label})]})]}),(0,a.jsx)(g.Z,{className:"w-5 h-5 text-gray-500"})]},e.id)})})]}),"pagamentos"===v&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Pedidos de Pagamento"}),(0,a.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 bg-emerald-600 hover:bg-emerald-700 rounded-lg text-sm transition-colors",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),"Novo Pedido"]})]}),0===(d.pedidosPagamento||[]).length?(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500 border border-dashed border-white/10 rounded-lg",children:[(0,a.jsx)(x,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"Sem pedidos de pagamento"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"Crie pedidos para receber financiamento"})]}):(0,a.jsx)("div",{className:"space-y-3",children:d.pedidosPagamento.map(e=>{let t=j[e.estado];return(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-lg flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-emerald-400 font-bold",children:["#",e.numero]})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:f(e.montante)}),e.dataSubmissao&&(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Submetido em ",N(e.dataSubmissao)]})]}),(0,a.jsx)("span",{className:`text-xs px-3 py-1 rounded-full ${t.color}`,children:t.label})]},e.id)})}),(d.pedidosPagamento||[]).length>0&&(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-r from-emerald-500/10 to-blue-500/10 rounded-lg border border-emerald-500/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Progresso de Pagamentos"}),(0,a.jsxs)("span",{className:"font-bold text-emerald-400",children:[f(d.pedidosPagamento.filter(e=>"PAGO"===e.estado).reduce((e,t)=>e+t.montante,0))," / ",f(d.montanteAprovado||0)]})]}),(0,a.jsx)("div",{className:"h-3 bg-black/30 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-green-400 rounded-full",style:{width:`${d.montanteAprovado?d.pedidosPagamento.filter(e=>"PAGO"===e.estado).reduce((e,t)=>e+t.montante,0)/d.montanteAprovado*100:0}%`}})})]})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.Z,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"Selecione um projecto para ver detalhes"})]})})})]})]})}},79205:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var a=s(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),d=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:l="",children:d,iconNode:o,...m},x)=>(0,a.createElement)("svg",{ref:x,...i,width:t,height:t,stroke:e,strokeWidth:r?24*Number(s)/Number(t):s,className:n("lucide",l),...!d&&!c(m)&&{"aria-hidden":"true"},...m},[...o.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(d)?d:[d]])),m=(e,t)=>{let s=(0,a.forwardRef)(({className:s,...l},c)=>(0,a.createElement)(o,{ref:c,iconNode:t,className:n(`lucide-${r(d(e))}`,`lucide-${e}`,s),...l}));return s.displayName=d(e),s}},43681:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]])},31047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},10407:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},92934:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},91723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},48736:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},99397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},58896:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},70525:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},76865:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}},function(e){e.O(0,[605,2971,2117,1744],function(){return e(e.s=85750)}),_N_E=e.O()}]);