(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9214],{86032:function(e,s,t){Promise.resolve().then(t.bind(t,28512))},28512:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return O}});var a=t(57437),n=t(2265),r=t(14438),i=t(98420),l=t(82431),c=t(51817),d=t(58896),o=t(91723),m=t(96362),u=t(76858),x=t(66070),h=t(62869),f=t(53647),p=t(98239),g=t(94508);function j({score:e,confidence:s,size:t="md",showLabel:n=!0}){let r=Math.max(0,Math.min(100,e)),{width:i,strokeWidth:l,fontSize:c}={sm:{width:80,strokeWidth:6,fontSize:"text-lg"},md:{width:120,strokeWidth:8,fontSize:"text-2xl"},lg:{width:160,strokeWidth:10,fontSize:"text-4xl"}}[t],d=(i-l)/2,o=2*Math.PI*d,m=o-r/100*o,u=r>=70?{stroke:"#22c55e",bg:"bg-green-500/10",text:"text-green-500"}:r>=40?{stroke:"#eab308",bg:"bg-yellow-500/10",text:"text-yellow-500"}:{stroke:"#ef4444",bg:"bg-red-500/10",text:"text-red-500"};return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",style:{width:i,height:i},children:[(0,a.jsxs)("svg",{width:i,height:i,className:"transform -rotate-90",children:[(0,a.jsx)("circle",{cx:i/2,cy:i/2,r:d,fill:"none",stroke:"currentColor",strokeWidth:l,className:"text-muted/20"}),(0,a.jsx)(p.E.circle,{cx:i/2,cy:i/2,r:d,fill:"none",stroke:u.stroke,strokeWidth:l,strokeLinecap:"round",strokeDasharray:o,initial:{strokeDashoffset:o},animate:{strokeDashoffset:m},transition:{duration:1.5,ease:"easeOut"}})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(p.E.span,{className:(0,g.cn)("font-bold",c,u.text),initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.5,duration:.5},children:r})})]}),n&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:(0,g.cn)("text-xs font-medium",u.text),children:(()=>{switch(s){case"ALTA":return"Alta Confian\xe7a";case"MEDIA":return"Confian\xe7a M\xe9dia";case"BAIXA":return"Dados Incompletos"}})()})})]})}var N=t(57586),v=t(83774);let y=(0,t(79205).Z)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);var b=t(48736),w=t(92934),k=t(76865),Z=t(22135),E=t(40875);let C={Região:(0,a.jsx)(v.Z,{className:"h-4 w-4"}),Dimensão:(0,a.jsx)(i.Z,{className:"h-4 w-4"}),CAE:(0,a.jsx)(y,{className:"h-4 w-4"}),Documentação:(0,a.jsx)(b.Z,{className:"h-4 w-4"})};function M({match:e,expanded:s=!1}){let[t,r]=(0,n.useState)(s),i=e.reasons.length>0,l=e.missing.length>0;return(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden bg-card",children:[(0,a.jsxs)("button",{onClick:()=>r(!t),className:"w-full flex items-center justify-between p-4 hover:bg-muted/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[i&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-green-500 text-sm",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),e.reasons.length]}),l&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-yellow-500 text-sm ml-2",children:[(0,a.jsx)(k.Z,{className:"h-4 w-4"}),e.missing.length]})]}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Checklist de Elegibilidade"})]}),t?(0,a.jsx)(Z.Z,{className:"h-4 w-4"}):(0,a.jsx)(E.Z,{className:"h-4 w-4"})]}),(0,a.jsx)(N.M,{children:t&&(0,a.jsx)(p.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"p-4 pt-0 space-y-4",children:[i&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Crit\xe9rios Satisfeitos"}),(0,a.jsx)("ul",{className:"space-y-2",children:e.reasons.map((e,s)=>(0,a.jsxs)(p.E.li,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*s},className:"flex items-start gap-2 text-sm",children:[(0,a.jsx)("span",{className:"text-green-500 mt-0.5",children:function(e){for(let[s,t]of Object.entries(C))if(e.toLowerCase().includes(s.toLowerCase()))return t;return(0,a.jsx)(w.Z,{className:"h-4 w-4"})}(e)}),(0,a.jsx)("span",{children:e})]},s))})]}),l&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"A Confirmar / Em Falta"}),(0,a.jsx)("ul",{className:"space-y-2",children:e.missing.map((s,t)=>(0,a.jsxs)(p.E.li,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:(e.reasons.length+t)*.1},className:"flex items-start gap-2 text-sm",children:[(0,a.jsx)("span",{className:"text-yellow-500 mt-0.5",children:(0,a.jsx)(k.Z,{className:"h-4 w-4"})}),(0,a.jsx)("span",{className:"text-muted-foreground",children:s})]},t))})]}),(0,a.jsx)("div",{className:"pt-2 border-t",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.matchDetails).map(([e,s])=>(0,a.jsx)("span",{className:(0,g.cn)("px-2 py-1 rounded-full text-xs font-medium",s?"bg-green-500/10 text-green-500":"bg-muted text-muted-foreground"),children:e.replace("Match","")},e))})})]})})})]})}var A=t(21950);function O(){let[e,s]=(0,n.useState)([]),[t,p]=(0,n.useState)(""),[g,N]=(0,n.useState)(null),[v,y]=(0,n.useState)([]),[b,w]=(0,n.useState)(!1),[k,Z]=(0,n.useState)(!0);async function E(){if(t){w(!0);try{let e=await fetch("/api/eligibility/check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({empresaId:t})});if(!e.ok)throw Error("Failed to check eligibility");let s=await e.json();y(s.matches||[]),N(s.empresa),r.A.success(`${s.matches?.length||0} avisos compat\xedveis encontrados`)}catch(e){console.error("Error checking eligibility:",e),r.A.error("Erro ao verificar elegibilidade"),y([])}finally{w(!1)}}}return(0,n.useEffect)(()=>{(async function(){try{let e=await fetch("/api/eligibility/empresas");if(!e.ok)throw Error("Failed to fetch empresas");let t=await e.json();s(t.empresas||[])}catch(e){console.error("Error fetching empresas:",e),r.A.error("Erro ao carregar empresas")}finally{Z(!1)}})()},[]),(0,n.useEffect)(()=>{t?E():(y([]),N(null))},[t]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"An\xe1lise de Elegibilidade"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Verifique a compatibilidade da sua empresa com os avisos dispon\xedveis"})]}),(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsxs)(x.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"h-5 w-5"}),"Selecionar Empresa"]}),(0,a.jsx)(x.SZ,{children:"Escolha uma empresa para analisar a elegibilidade"})]}),(0,a.jsxs)(x.aY,{children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(f.Ph,{value:t,onValueChange:p,disabled:k,children:[(0,a.jsx)(f.i4,{className:"w-full md:w-[400px]",children:(0,a.jsx)(f.ki,{placeholder:k?"A carregar...":"Selecione uma empresa..."})}),(0,a.jsx)(f.Bw,{children:e.map(e=>(0,a.jsx)(f.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium",children:e.nome}),(0,a.jsxs)("span",{className:"text-muted-foreground text-xs",children:["CAE ",e.cae," • ",e.dimensao]})]})},e.id))})]}),t&&(0,a.jsx)(h.z,{variant:"outline",size:"icon",onClick:E,disabled:b,children:(0,a.jsx)(l.Z,{className:`h-4 w-4 ${b?"animate-spin":""}`})})]}),g&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg relative",children:[(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)(A.l,{entityId:t,entityType:"empresa",entityName:g.nome})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm pr-12",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"NIPC"}),(0,a.jsx)("p",{className:"font-medium",children:g.nipc})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"CAE"}),(0,a.jsx)("p",{className:"font-medium",children:g.cae})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Dimens\xe3o"}),(0,a.jsx)("p",{className:"font-medium",children:g.dimensao})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Regi\xe3o"}),(0,a.jsx)("p",{className:"font-medium",children:g.distrito||"N/A"})]})]})]})]})]}),b&&(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(c.Z,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("span",{className:"ml-3 text-muted-foreground",children:"A analisar elegibilidade..."})]}),!b&&v.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5"}),"Avisos Compat\xedveis (",v.length,")"]}),(0,a.jsx)("div",{className:"grid gap-4",children:v.map(e=>(0,a.jsx)(x.Zb,{className:"overflow-hidden",children:(0,a.jsx)(x.aY,{className:"p-0",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,a.jsx)("div",{className:"p-6 bg-muted/30 flex items-center justify-center md:w-48",children:(0,a.jsx)(j,{score:e.score,confidence:e.confidence,size:"md"})}),(0,a.jsxs)("div",{className:"flex-1 p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:e.avisoNome}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{className:"bg-primary/10 text-primary px-2 py-0.5 rounded",children:e.portal}),e.taxa&&(0,a.jsxs)("span",{children:["Taxa: ",e.taxa]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),e.diasRestantes," dias"]})]})]}),e.link&&(0,a.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary",children:(0,a.jsx)(m.Z,{className:"h-5 w-5"})})]}),(0,a.jsx)(M,{match:e}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(h.z,{asChild:!0,children:(0,a.jsxs)("a",{href:`/dashboard/candidaturas/nova?aviso=${e.avisoId}&empresa=${t}`,children:["Iniciar Candidatura",(0,a.jsx)(u.Z,{className:"ml-2 h-4 w-4"})]})})})]})]})})},e.avisoId))})]}),!b&&t&&0===v.length&&(0,a.jsx)(x.Zb,{children:(0,a.jsxs)(x.aY,{className:"py-12 text-center",children:[(0,a.jsx)(d.Z,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Nenhum aviso compat\xedvel"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"N\xe3o foram encontrados avisos compat\xedveis com o perfil desta empresa."})]})}),!k&&0===e.length&&(0,a.jsx)(x.Zb,{children:(0,a.jsxs)(x.aY,{className:"py-12 text-center",children:[(0,a.jsx)(i.Z,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Sem empresas registadas"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2 mb-4",children:"Adicione uma empresa para come\xe7ar a an\xe1lise de elegibilidade."}),(0,a.jsx)(h.z,{asChild:!0,children:(0,a.jsx)("a",{href:"/dashboard/empresas",children:"Adicionar Empresa"})})]})})]})}},62869:function(e,s,t){"use strict";t.d(s,{z:function(){return d}});var a=t(57437),n=t(2265),r=t(37053),i=t(77712),l=t(94508);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef(({className:e,variant:s,size:t,asChild:n=!1,...i},d)=>{let o=n?r.g7:"button";return(0,a.jsx)(o,{className:(0,l.cn)(c({variant:s,size:t,className:e})),ref:d,...i})});d.displayName="Button"},66070:function(e,s,t){"use strict";t.d(s,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},eW:function(){return m},ll:function(){return c}});var a=t(57437),n=t(2265),r=t(94508);let i=n.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...s}));i.displayName="Card";let l=n.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let c=n.forwardRef(({className:e,...s},t)=>(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let d=n.forwardRef(({className:e,...s},t)=>(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let o=n.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent";let m=n.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",e),...s}));m.displayName="CardFooter"},94508:function(e,s,t){"use strict";t.d(s,{cn:function(){return r}});var a=t(61994),n=t(53335);function r(...e){return(0,n.m6)((0,a.W)(e))}},92934:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},96362:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},48736:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},51817:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},83774:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},82431:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},71599:function(e,s,t){"use strict";t.d(s,{z:function(){return l}});var a=t(2265),n=t(54887),r=t(98575),i=t(61188),l=e=>{let s,t;let{present:l,children:d}=e,o=function(e){var s,t;let[r,l]=a.useState(),d=a.useRef({}),o=a.useRef(e),m=a.useRef("none"),[u,x]=(s=e?"mounted":"unmounted",t={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},a.useReducer((e,s)=>t[e][s]??e,s));return a.useEffect(()=>{let e=c(d.current);m.current="mounted"===u?e:"none"},[u]),(0,i.b)(()=>{let s=d.current,t=o.current;if(t!==e){let a=m.current,n=c(s);e?x("MOUNT"):"none"===n||s?.display==="none"?x("UNMOUNT"):t&&a!==n?x("ANIMATION_OUT"):x("UNMOUNT"),o.current=e}},[e,x]),(0,i.b)(()=>{if(r){let e=e=>{let s=c(d.current).includes(e.animationName);e.target===r&&s&&n.flushSync(()=>x("ANIMATION_END"))},s=e=>{e.target===r&&(m.current=c(d.current))};return r.addEventListener("animationstart",s),r.addEventListener("animationcancel",e),r.addEventListener("animationend",e),()=>{r.removeEventListener("animationstart",s),r.removeEventListener("animationcancel",e),r.removeEventListener("animationend",e)}}x("ANIMATION_END")},[r,x]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:a.useCallback(e=>{e&&(d.current=getComputedStyle(e)),l(e)},[])}}(l),m="function"==typeof d?d({present:o.isPresent}):a.Children.only(d),u=(0,r.e)(o.ref,(s=Object.getOwnPropertyDescriptor(m.props,"ref")?.get)&&"isReactWarning"in s&&s.isReactWarning?m.ref:(s=Object.getOwnPropertyDescriptor(m,"ref")?.get)&&"isReactWarning"in s&&s.isReactWarning?m.props.ref:m.props.ref||m.ref);return"function"==typeof d||o.isPresent?a.cloneElement(m,{ref:u}):null};function c(e){return e?.animationName||"none"}l.displayName="Presence"}},function(e){e.O(0,[6137,501,8239,7514,3145,5763,1358,1950,2971,2117,1744],function(){return e(e.s=86032)}),_N_E=e.O()}]);