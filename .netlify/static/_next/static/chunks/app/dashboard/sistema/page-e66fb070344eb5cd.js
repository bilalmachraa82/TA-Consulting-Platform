(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9832],{32061:function(e,t,s){Promise.resolve().then(s.bind(s,59754))},59754:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var r=s(57437),a=s(2265),n=s(66070),i=s(35974),l=s(62869),c=s(41671),o=s(76865),d=s(99388),u=s(82431),m=s(42488),f=s(50091),x=s(79205);let h=(0,x.Z)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),y=(0,x.Z)("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);var p=s(91723),g=s(64972),j=s(98239);let v=({status:e})=>{switch(e){case"healthy":return(0,r.jsx)(c.Z,{className:"h-5 w-5 text-green-500"});case"degraded":return(0,r.jsx)(o.Z,{className:"h-5 w-5 text-yellow-500"});default:return(0,r.jsx)(d.Z,{className:"h-5 w-5 text-red-500"})}},b=({status:e})=>{let t={healthy:"bg-green-100 text-green-800 border-green-200",degraded:"bg-yellow-100 text-yellow-800 border-yellow-200",unhealthy:"bg-red-100 text-red-800 border-red-200"};return(0,r.jsx)(i.C,{className:`${t[e]||t.unhealthy} border`,children:e.toUpperCase()})};function N(e){return new Date(e).toLocaleString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function w(){let[e,t]=(0,a.useState)(null),[s,c]=(0,a.useState)(!0),[o,x]=(0,a.useState)(null),w=async()=>{c(!0),x(null);try{let e=await fetch("/api/monitoring/health");if(!e.ok)throw Error("Health check failed");let s=await e.json();t(s)}catch(e){x("N\xe3o foi poss\xedvel obter o estado do sistema"),console.error(e)}finally{c(!1)}};return((0,a.useEffect)(()=>{w();let e=setInterval(w,3e4);return()=>clearInterval(e)},[]),s&&!e)?(0,r.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,r.jsxs)("div",{className:"animate-pulse text-gray-500 flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:"h-5 w-5 animate-spin"}),"A verificar estado do sistema..."]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,r.jsx)(m.Z,{className:"h-6 w-6"}),"Estado do Sistema"]}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Monitoriza\xe7\xe3o em tempo real da plataforma"})]}),(0,r.jsxs)(l.z,{variant:"outline",onClick:w,disabled:s,className:"flex items-center gap-2",children:[(0,r.jsx)(u.Z,{className:`h-4 w-4 ${s?"animate-spin":""}`}),"Atualizar"]})]}),o&&(0,r.jsx)(n.Zb,{className:"border-red-200 bg-red-50",children:(0,r.jsx)(n.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,r.jsx)(d.Z,{className:"h-5 w-5"}),o]})})}),e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,r.jsx)(n.Zb,{children:(0,r.jsxs)(n.Ol,{className:"pb-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(v,{status:e.status}),"Estado Global"]}),(0,r.jsx)(b,{status:e.status})]}),(0,r.jsxs)(n.SZ,{children:["\xdaltima verifica\xe7\xe3o: ",N(e.timestamp)]})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsx)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{className:"pb-2",children:(0,r.jsxs)(n.ll,{className:"text-sm flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4"}),"Base de Dados"]})}),(0,r.jsx)(n.aY,{children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Conex\xe3o"}),(0,r.jsx)(i.C,{variant:e.database.connected?"default":"destructive",children:e.database.connected?"Activa":"Inactiva"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Total Avisos"}),(0,r.jsx)("span",{className:"font-mono font-bold text-lg",children:e.database.avisoCount.toLocaleString("pt-PT")})]}),e.database.lastAvisoDate&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"\xdaltima Atualiza\xe7\xe3o"}),(0,r.jsx)("span",{className:"text-xs text-gray-600",children:N(e.database.lastAvisoDate)})]})]})})]})}),(0,r.jsx)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{className:"pb-2",children:(0,r.jsxs)(n.ll,{className:"text-sm flex items-center gap-2",children:[(0,r.jsx)(h,{className:"h-4 w-4"}),"Avisos por Portal"]})}),(0,r.jsx)(n.aY,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[Object.entries(e.database.avisosByPortal).map(([e,t])=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:e}),(0,r.jsx)("span",{className:"font-mono text-sm",children:t})]},e)),0===Object.keys(e.database.avisosByPortal).length&&(0,r.jsx)("p",{className:"text-sm text-gray-400 italic",children:"Sem dados"})]})})]})}),(0,r.jsx)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{className:"pb-2",children:(0,r.jsxs)(n.ll,{className:"text-sm flex items-center gap-2",children:[(0,r.jsx)(y,{className:"h-4 w-4"}),"Sistema"]})}),(0,r.jsx)(n.aY,{children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500 flex items-center gap-1",children:[(0,r.jsx)(p.Z,{className:"h-3 w-3"})," Uptime"]}),(0,r.jsx)("span",{className:"font-mono text-sm",children:function(e){let t=Math.floor(e/86400),s=Math.floor(e%86400/3600),r=Math.floor(e%3600/60);return t>0?`${t}d ${s}h`:s>0?`${s}h ${r}m`:`${r}m`}(e.system.uptime)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Mem\xf3ria"}),(0,r.jsxs)("span",{className:"font-mono text-sm",children:[e.system.memoryUsage," MB"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Node.js"}),(0,r.jsx)("span",{className:"font-mono text-xs text-gray-600",children:e.system.nodeVersion})]})]})})]})}),e.rag&&(0,r.jsx)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,r.jsxs)(n.Zb,{children:[(0,r.jsx)(n.Ol,{className:"pb-2",children:(0,r.jsxs)(n.ll,{className:"text-sm flex items-center gap-2",children:[(0,r.jsx)(g.Z,{className:"h-4 w-4"}),"Sistema RAG"]})}),(0,r.jsx)(n.aY,{children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Estado"}),(0,r.jsx)(i.C,{variant:"configured"===e.rag.status?"default":"secondary",children:"configured"===e.rag.status?"Configurado":e.rag.status})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Documentos Indexados"}),(0,r.jsx)("span",{className:"font-mono font-bold",children:e.rag.documentCount})]})]})})]})})]})]})]})}},35974:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var r=s(57437);s(2265);var a=s(77712),n=s(94508);let i=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...s}){return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:t}),e),...s})}},62869:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var r=s(57437),a=s(2265),n=s(37053),i=s(77712),l=s(94508);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...i},o)=>{let d=a?n.g7:"button";return(0,r.jsx)(d,{className:(0,l.cn)(c({variant:t,size:s,className:e})),ref:o,...i})});o.displayName="Button"},66070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var r=s(57437),a=s(2265),n=s(94508);let i=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));i.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle";let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent";let u=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},94508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(61994),a=s(53335);function n(...e){return(0,a.m6)((0,r.W)(e))}},79205:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var r=s(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),i=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:d,...u},m)=>(0,r.createElement)("svg",{ref:m,...o,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:l("lucide",n),...!i&&!c(u)&&{"aria-hidden":"true"},...u},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(i)?i:[i]])),u=(e,t)=>{let s=(0,r.forwardRef)(({className:s,...n},c)=>(0,r.createElement)(d,{ref:c,iconNode:t,className:l(`lucide-${a(i(e))}`,`lucide-${e}`,s),...n}));return s.displayName=i(e),s}},42488:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},64972:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]])},41671:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},99388:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},91723:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},50091:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},82431:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},76865:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},98575:function(e,t,s){"use strict";s.d(t,{F:function(){return a},e:function(){return n}});var r=s(2265);function a(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}function n(...e){return r.useCallback(a(...e),e)}},37053:function(e,t,s){"use strict";s.d(t,{g7:function(){return i}});var r=s(2265),a=s(98575),n=s(57437),i=r.forwardRef((e,t)=>{let{children:s,...a}=e,i=r.Children.toArray(s),c=i.find(o);if(c){let e=c.props.children,s=i.map(t=>t!==c?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,n.jsx)(l,{...a,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,s):null})}return(0,n.jsx)(l,{...a,ref:t,children:s})});i.displayName="Slot";var l=r.forwardRef((e,t)=>{let{children:s,...n}=e;if(r.isValidElement(s)){let e,i;let l=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.props.ref:s.props.ref||s.ref;return r.cloneElement(s,{...function(e,t){let s={...t};for(let r in t){let a=e[r],n=t[r];/^on[A-Z]/.test(r)?a&&n?s[r]=(...e)=>{n(...e),a(...e)}:a&&(s[r]=a):"style"===r?s[r]={...a,...n}:"className"===r&&(s[r]=[a,n].filter(Boolean).join(" "))}return{...e,...s}}(n,s.props),ref:t?(0,a.F)(t,l):l})}return r.Children.count(s)>1?r.Children.only(null):null});l.displayName="SlotClone";var c=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});function o(e){return r.isValidElement(e)&&e.type===c}},77712:function(e,t,s){"use strict";s.d(t,{j:function(){return n}});let r=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,a=function(){for(var e,t,s=0,r="";s<arguments.length;)(e=arguments[s++])&&(t=function e(t){var s,r,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t))for(s=0;s<t.length;s++)t[s]&&(r=e(t[s]))&&(a&&(a+=" "),a+=r);else for(s in t)t[s]&&(a&&(a+=" "),a+=s)}return a}(e))&&(r&&(r+=" "),r+=t);return r},n=(e,t)=>s=>{var n;if((null==t?void 0:t.variants)==null)return a(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:i,defaultVariants:l}=t,c=Object.keys(i).map(e=>{let t=null==s?void 0:s[e],a=null==l?void 0:l[e];if(null===t)return null;let n=r(t)||r(a);return i[e][n]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return a(e,c,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...l,...o}[t]):({...l,...o})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}}},function(e){e.O(0,[6137,8239,2971,2117,1744],function(){return e(e.s=32061)}),_N_E=e.O()}]);